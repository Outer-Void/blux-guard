/* ==============================
   BLUX Guard Unified Cockpit CSS
   Enhanced for Cross-Platform Compatibility
   Version: 1.0.0
   Author: Outer Void Team
   ============================== */

/* ------------------------------
   CSS Variables for Theming
------------------------------ */
:root {
    /* Color Palette - Security Focused */
    --color-primary: #0d47a1;
    --color-primary-dark: #002171;
    --color-primary-light: #5472d3;
    
    --color-secondary: #ff9800;
    --color-secondary-dark: #c66900;
    --color-secondary-light: #ffc947;
    
    --color-success: #4caf50;
    --color-warning: #ffeb3b;
    --color-danger: #f44336;
    --color-info: #2196f3;
    
    /* Security Status Colors */
    --color-secure: #4caf50;
    --color-warning: #ff9800;
    --color-critical: #f44336;
    --color-neutral: #9e9e9e;
    
    /* Background Colors */
    --bg-primary: #1e1e1e;
    --bg-secondary: #262626;
    --bg-tertiary: #2d2d2d;
    --bg-panel: #1b1b1b;
    
    /* Text Colors */
    --text-primary: #f0f0f0;
    --text-secondary: #cfcfcf;
    --text-muted: #9e9e9e;
    
    /* Border Colors */
    --border-primary: #2196f3;
    --border-secondary: #ff9800;
    --border-success: #4caf50;
    --border-warning: #ffeb3b;
    --border-danger: #f44336;
    
    /* Spacing */
    --spacing-xs: 1;
    --spacing-sm: 2;
    --spacing-md: 3;
    --spacing-lg: 4;
    --spacing-xl: 6;
}

/* ------------------------------
   Global App Styling
------------------------------ */
App {
    background: var(--bg-primary);
    color: var(--text-primary);
}

Screen {
    background: var(--bg-primary);
}

/* ------------------------------
   Header & Footer
------------------------------ */
Header {
    height: 3;
    background: var(--color-primary);
    color: white;
    text-style: bold;
    border: heavy var(--color-primary-dark);
    padding: 0 2;
}

Header .header--title {
    color: white;
    text-style: bold;
}

Header .header--subtitle {
    color: var(--text-secondary);
    text-style: italic;
}

Footer {
    height: 2;
    background: var(--color-primary-dark);
    color: var(--text-secondary);
    text-style: italic;
    border-top: heavy var(--color-primary);
}

/* ------------------------------
   Layout Containers
------------------------------ */
Horizontal, Vertical {
    width: 100%;
    height: 100%;
}

Horizontal {
    layout: horizontal;
}

Vertical {
    layout: vertical;
}

/* Panel Containers */
.tree-panel {
    width: 40%;
    height: 100%;
    border: round var(--border-primary);
    background: var(--bg-panel);
}

.details-panel {
    width: 60%;
    height: 100%;
    border: round var(--border-secondary);
    background: var(--bg-secondary);
}

/* ------------------------------
   Panels (General)
------------------------------ */
Panel {
    border: round var(--border-primary);
    padding: var(--spacing-sm);
    margin: var(--spacing-xs) 0;
    background: var(--bg-secondary);
}

Panel:focus {
    border: double var(--color-secondary);
}

/* ------------------------------
   Specialized Panels by ID/Class
------------------------------ */

/* Security Status Panel */
.security-header {
    background: var(--color-primary-dark);
    color: white;
    text-style: bold;
    padding: 1;
    margin: 0;
    border: none;
}

.security-content {
    background: var(--bg-tertiary);
    color: var(--text-secondary);
    padding: 1;
    border: round var(--border-info);
}

/* Node Details Panel */
.details-header {
    background: var(--color-primary-dark);
    color: white;
    text-style: bold;
    padding: 1;
    margin: 0;
    border: none;
}

.details-content {
    background: var(--bg-tertiary);
    color: var(--text-secondary);
    padding: 1;
    border: none;
    height: 70%;
}

/* Log Panels */
#log, #log_panel, .log-panel {
    border: round var(--color-success);
    background: var(--bg-panel);
    padding: var(--spacing-sm);
    height: 1fr;
    overflow: auto;
    color: var(--text-secondary);
}

/* Control Panels */
#controls, .controls-panel {
    border: round var(--color-warning);
    padding: var(--spacing-sm);
    height: auto;
    background: var(--bg-secondary);
}

/* Monitoring Panels */
#network_monitor, .network-panel {
    border: round var(--color-info);
    background: var(--bg-panel);
    padding: var(--spacing-sm);
}

#process_monitor, .process-panel {
    border: round var(--color-success);
    background: var(--bg-panel);
    padding: var(--spacing-sm);
}

/* Decision Panels */
#decisions_panel, .decisions-panel {
    border: round #9c27b0;
    background: var(--bg-secondary);
    padding: var(--spacing-sm);
}

/* Sensor Panels */
#sensors_panel, .sensors-panel {
    border: round #ff5722;
    background: var(--bg-panel);
    padding: var(--spacing-sm);
}

/* Script Panels */
#scripts_panel, .scripts-panel {
    border: round var(--color-primary-light);
    background: var(--bg-secondary);
    padding: var(--spacing-sm);
}

/* ------------------------------
   Tree Widget Styling
------------------------------ */
Tree {
    width: 100%;
    height: 100%;
    background: var(--bg-panel);
    color: var(--text-primary);
    border: none;
}

Tree:focus {
    border: none;
}

Tree > .tree--cursor {
    background: var(--color-primary);
    color: white;
}

Tree > .tree--highlight {
    background: var(--color-primary-light);
    color: white;
}

.tree-guard-node {
    color: var(--color-success);
}

.tree-lite-node {
    color: var(--color-warning);
}

.tree-ca-node {
    color: var(--color-info);
}

.tree-security-node {
    color: var(--color-danger);
}

/* ------------------------------
   Tables
------------------------------ */
Table {
    width: 100%;
    border: round var(--border-primary);
    background: var(--bg-panel);
    color: var(--text-primary);
}

Table > .table--header {
    background: var(--color-primary-dark);
    color: white;
    text-style: bold;
}

Table > .table--cursor {
    background: var(--color-primary-light);
    color: white;
}

/* ------------------------------
   Buttons & Controls
------------------------------ */
Button {
    border: round var(--color-secondary);
    background: var(--bg-tertiary);
    color: var(--color-secondary);
    padding: 0 var(--spacing-sm);
    margin: 0 var(--spacing-xs);
}

Button:hover {
    background: var(--color-secondary);
    color: black;
}

Button:focus {
    border: double var(--color-secondary-light);
    background: var(--color-secondary);
    color: black;
}

/* Security State Buttons */
.button-secure {
    border: round var(--color-success);
    color: var(--color-success);
}

.button-warning {
    border: round var(--color-warning);
    color: var(--color-warning);
}

.button-critical {
    border: round var(--color-danger);
    color: var(--color-danger);
}

/* ------------------------------
   Form Controls
------------------------------ */
Input {
    border: round var(--border-primary);
    background: var(--bg-tertiary);
    color: var(--text-primary);
    padding: 0 1;
}

Input:focus {
    border: double var(--color-secondary);
}

Checkbox {
    color: var(--color-secondary);
    margin: 0 var(--spacing-xs);
}

Checkbox:focus {
    color: var(--color-secondary-light);
}

Select {
    border: round var(--border-primary);
    background: var(--bg-tertiary);
    color: var(--text-primary);
}

Select:focus {
    border: double var(--color-secondary);
}

/* ------------------------------
   Scrollable Areas
------------------------------ */
ListView, Static, ScrollView {
    border: round var(--border-success);
    height: 1fr;
    padding: var(--spacing-sm);
    overflow: auto;
    background: var(--bg-panel);
    color: var(--text-secondary);
}

ScrollView {
    border: none;
}

/* ------------------------------
   Text & Markdown Styling
------------------------------ */
Markdown {
    color: var(--text-primary);
    background: var(--bg-panel);
}

Markdown h1, Markdown h2, Markdown h3 {
    color: var(--color-primary-light);
    text-style: bold;
}

Markdown code {
    background: var(--bg-tertiary);
    color: var(--color-secondary);
    border: solid var(--border-primary);
}

Markdown pre {
    background: var(--bg-tertiary);
    color: var(--text-secondary);
    border: solid var(--border-primary);
    padding: 1;
}

/* ------------------------------
   Status Indicators
------------------------------ */
.status-secure {
    color: var(--color-secure);
    text-style: bold;
}

.status-warning {
    color: var(--color-warning);
    text-style: bold;
}

.status-critical {
    color: var(--color-critical);
    text-style: bold;
}

.status-neutral {
    color: var(--color-neutral);
}

/* Security Level Indicators */
.security-level-low {
    color: var(--color-secure);
    border-left: heavy var(--color-secure);
    padding-left: 1;
}

.security-level-medium {
    color: var(--color-warning);
    border-left: heavy var(--color-warning);
    padding-left: 1;
}

.security-level-high {
    color: var(--color-danger);
    border-left: heavy var(--color-danger);
    padding-left: 1;
}

.security-level-critical {
    color: white;
    background: var(--color-danger);
    border-left: heavy var(--color-warning);
    padding: 0 1;
    text-style: bold;
}

/* ------------------------------
   Notification & Alert Styling
------------------------------ */
Notification {
    background: var(--bg-secondary);
    color: var(--text-primary);
    border: round var(--border-primary);
}

.notification-success {
    border: round var(--color-success);
    background: var(--bg-panel);
}

.notification-warning {
    border: round var(--color-warning);
    background: var(--bg-panel);
}

.notification-error {
    border: round var(--color-danger);
    background: var(--bg-panel);
}

.notification-info {
    border: round var(--color-info);
    background: var(--bg-panel);
}

/* ------------------------------
   Progress & Loading Indicators
------------------------------ */
ProgressBar {
    width: 100%;
    height: 1;
    background: var(--bg-tertiary);
    color: var(--color-primary);
}

ProgressBar > .progress-bar--bar {
    background: var(--color-primary);
}

ProgressBar.indeterminate {
    background: var(--color-primary-dark);
}

ProgressBar.indeterminate > .progress-bar--bar {
    background: var(--color-primary-light);
}

/* ------------------------------
   Platform-Specific Adjustments
------------------------------ */

/* Mobile/Termux Optimizations */
@media (max-width: 768px) {
    .tree-panel {
        width: 100%;
        height: 50%;
    }
    
    .details-panel {
        width: 100%;
        height: 50%;
    }
    
    Horizontal {
        layout: vertical;
    }
    
    Button {
        padding: 1 2;
        margin: 1;
    }
}

/* High-Contrast Mode Support */
.high-contrast {
    --bg-primary: #000000;
    --bg-secondary: #111111;
    --text-primary: #ffffff;
    --text-secondary: #cccccc;
}

/* Reduced Motion Support */
@media (prefers-reduced-motion: reduce) {
    * {
        transition: none !important;
        animation: none !important;
    }
}

/* ------------------------------
   Accessibility Enhancements
------------------------------ */
.a11y-high-contrast {
    color-scheme: dark;
    contrast: high;
}

.a11y-large-text {
    text-size: large;
}

/* Focus indicators for keyboard navigation */
*:focus-visible {
    border: double var(--color-secondary) !important;
    outline: none !important;
}

/* Screen reader only content */
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}
